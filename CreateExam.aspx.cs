using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Data.SqlClient; using System.IO;

public partial class CreateExam : System.Web.UI.Page
{
    string user = ""; string exname = ""; int countItem = 0; int countet = 0;
    string weeks = "";
    string dater;
    string moki = ""; string course = "";
    string choice; string line = "";
    string editmode = "0";
    string currendiv="0";
    public void Checker(bool elser)
    {
        countItem = 0;
        {
            {
                SqlConnection Scon;
                SqlDataReader Reader;
                SqlCommand Cmd;  StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");  line = sr.ReadLine();
                string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                string sConnection = "Data Source="+line+"\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                string sql;
                sql = "Select * From question_table WHERE exam_code = '" + exname + "' AND ins_id = '" + user + "' OR ques_id = '" + "AAA" + "'";
                Scon = new SqlConnection(sConnection);
                Scon.Open();
                Cmd = new SqlCommand(sql, Scon);
                Reader = Cmd.ExecuteReader();

                while (Reader.Read())
                {
                
                    countItem++;

                }
                Reader.Close();
                Scon.Close();
            }
            if (elser == true)
            {
                if (countItem == 0)
                {
                  //  InsertDummy();
                  //  GridView1.AutoGenerateEditButton = false; ;
                  //  GridView1.AutoGenerateDeleteButton = false;


                }
                else
                {

                    SqlConnection Scon;
                
                    SqlCommand Cmd;  StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");  line = sr.ReadLine();
                    string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                    string sConnection = "Data Source="+line+"\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                    string sql;

                    sql = "DELETE FROM question_table WHERE exam_code = '" + exname + "' AND ins_id = '" + user + "' AND ques_id LIKE '" + "AUO878728MchbMhajOl%" + "'";
                    Scon = new SqlConnection(sConnection);
                    Scon.Open();
                    Cmd = new SqlCommand(sql, Scon);
                    Cmd.ExecuteNonQuery();
                    Scon.Close();

                //    GridView1.AutoGenerateEditButton = true; ;
                 //   GridView1.AutoGenerateDeleteButton = true;

              


                }
               
                
            }
            else
            {
                if (countItem == 0)
                {
                    InsertDummy();
                //    GridView1.AutoGenerateEditButton = false; ;
                //    GridView1.AutoGenerateDeleteButton = false;


                }
            }
        }
      
    }
    private void helpfetch()
    {
        try
        {
            weeks = Page.Session["weeks"].ToString();

            {
                //DropDownList1.Items.Clear();
                SqlConnection Scon;
                SqlDataReader Reader;
                SqlCommand Cmd;
                StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");
                line = sr.ReadLine();
                string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                string sql;
                sql = "Select DISTINCT topic_desc From course_topics WHERE topic_id LIKE '" + course + "%' ORDER BY topic_id  ASC";

                Scon = new SqlConnection(sConnection);
                Scon.Open();
                Cmd = new SqlCommand(sql, Scon);
                Reader = Cmd.ExecuteReader();
                //tanga
                while (Reader.Read())
                {
                    DropDownList1.Items.Add(Reader["topic_desc"].ToString());
                }

                Reader.Close();
                Scon.Close();
            }
        }
        catch
        {
          //  DropDownList1.Items.Clear();
            SqlConnection Scon;
            SqlDataReader Reader;
            SqlCommand Cmd;
            StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");
            line = sr.ReadLine();
            string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;
            sql = "Select  topic_desc From course_topics WHERE topic_id LIKE '" + course + "%' ORDER BY topic_id  ASC";

            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Reader = Cmd.ExecuteReader();
            //tanga
            while (Reader.Read())
            {
                DropDownList1.Items.Add(Reader["topic_desc"].ToString());
            }

            Reader.Close();
            Scon.Close();
        }
    }
    protected void Page_Load(object sender, EventArgs e)
    {
        
        if (Page.Session["user"] == null)
        {

            Response.Redirect("LogIn.aspx");
        }
        else
        {

            if (Page.Session["exname"] == null)
            {

               
            }
            else
            {
                try
                {
                    
                    currendiv = Page.Session["currendiv"].ToString();
                    // if (currendiv == "3")
                    // {
                    //     panIden.Visible = true;
                    //     panTOF.Visible = false;
                    //     panMC.Visible = false;
                    //     RadioButton2.Checked = true;
                    // }
                    //if (currendiv == "2")
                    // {
                    //     panTOF.Visible = true;
                    //     panIden.Visible = false;
                    //     panMC.Visible = false;
                    //     RadioButton3.Checked = true;
                    // }
                    // if (currendiv == "0")
                    // {
                    //     panTOF.Visible = false;
                    //     panIden.Visible = false;
                    //     panMC.Visible = true;
                    //     radmc.Checked = true;
                    // }

                }
                catch { }
                course = Page.Session["course"].ToString();
                helpfetch();
                exname = Page.Session["exname"].ToString();

                editmode = Page.Session["editmode"].ToString();
                user = Page.Session["user"].ToString();

               
                LinkButton5.Visible = false;
                if (editmode == "0")
                {
                    Button9.Visible = false;
                }
                else if (editmode == "1")
                {
                    Button9.Visible = true;
                }
                else if (editmode == "2")
                {
                    Button9.Visible = false;
                }
                {
                    string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";

                    StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine(); SqlDataSource1.ConnectionString = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567"; SqlDataSource1.ConnectionString = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                    SqlDataSource2.ConnectionString = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                    SqlDataSource3.ConnectionString = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                    SqlDataSource4.ConnectionString = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                    SqlDataSource5.ConnectionString = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                }
                //panTOF.Visible = false;
                //panIden.Visible = false;
                //panMC.Visible = true;
                {
                    //if (choice == "T_M_I")
                    //{
                    //    Button3.Enabled = true;
                    //    Button4.Enabled = true;
                    //    Button5.Enabled = true;
                    //    Panel4.Visible = false;
                    //    Panel3.Visible = false;
                    //    Panel2.Visible = true;

                    //}
                    //else if (choice == "M_I")
                    //{
                    //    Button5.Enabled = true;
                    //    Button4.Enabled = false;
                    //    Button3.Enabled = true;
                    //    Panel4.Visible = false;
                    //    Panel3.Visible = false;
                    //    Panel2.Visible = true;
                    //}
                    //else if (choice == "I")
                    //{
                    //    Button5.Enabled = true;
                    //    Button4.Enabled = false;
                    //    Button3.Enabled = false;
                    //    Panel3.Visible = false;
                    //    Panel2.Visible = false;
                    //    Panel4.Visible = true;

                    //}  
                    //else if (choice == "T_I")
                    //{
                    //    Button5.Enabled = true;
                    //    Button4.Enabled = true;
                    //    Button3.Enabled = false;
                    //    Panel4.Visible = false;
                    //    Panel2.Visible = false;
                    //    Panel3.Visible = true;
                    //}
                    //else if (choice == "M")
                    //{
                    //    Button5.Enabled = false;
                    //    Button4.Enabled = false;
                    //    Button3.Enabled = true;
                    //    Panel4.Visible = false;
                    //    Panel3.Visible = false;
                    //    Panel2.Visible = true;
                    //}
                    //else if (choice == "T_M")
                    //{
                    //    Button5.Enabled = false;
                    //    Button4.Enabled = true;
                    //    Button3.Enabled = true;
                    //    Panel4.Visible = false;
                    //    Panel3.Visible = false;
                    //    Panel2.Visible = true;
                    //}
                    //else if (choice == "T")
                    //{
                    //    Button5.Enabled = false;
                    //    Button4.Enabled = true;
                    //    Button3.Enabled = false;
                    //    Panel4.Visible = false;
                    //    Panel2.Visible = false;
                    //    Panel3.Visible = true;
                    //}
                }
            }
                
            Checker(false);
            Label23.Text = exname;
        }
        if (currendiv == "3")
        {
            panTOF.Visible = false;
            panMC.Visible = false;
            panIden.Visible = true;
            changeit(3);
      
        }
        if (currendiv == "2")
        {
            panIden.Visible = false;
            panMC.Visible = false;
            panTOF.Visible = true; 
            changeit(2);
           
        }
        if (currendiv == "0")
        {
            panTOF.Visible = false;
            panIden.Visible = false;
            panMC.Visible = true;
            changeit(1);
        }
        checkerPerc();

    }
    private void InsertDummy()
    {
        //SqlConnection Scon;
        //SqlDataReader Reader;
        //SqlCommand Cmd;  StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");  line = sr.ReadLine();
        //string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
        //string sConnection = "Data Source="+line+"\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
        //string sql;
        //sql = "Insert Into question_table VAlUES('" + user + "','" + "AUO878728MchbMhajOl" + System.DateTime.Now.ToString() + "','" + exname + "','" + null + "','" + "PLEASE START A NEW MULTIPLE CHOICE QUESTION ABOVE" + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + "" + "')";
        //Scon = new SqlConnection(sConnection);
        //Scon.Open();
        //Cmd = new SqlCommand(sql, Scon);
        //Reader = Cmd.ExecuteReader();
    }
    protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
    {
    

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
      
        {
           
                //TextBox txtQ = GridView1.HeaderRow.FindControl("txtQues") as TextBox;
                //TextBox txtCor = GridView1.HeaderRow.FindControl("txtCorrect") as TextBox;
                //TextBox txtA = GridView1.HeaderRow.FindControl("txtA") as TextBox;
                //TextBox txtB = GridView1.HeaderRow.FindControl("txtB") as TextBox;
                //TextBox txtC = GridView1.HeaderRow.FindControl("txtC") as TextBox;
                //TextBox txtD = GridView1.HeaderRow.FindControl("txtD") as TextBox;
                //TextBox txtE = GridView1.HeaderRow.FindControl("txtE") as TextBox;
                //TextBox txtF = GridView1.HeaderRow.FindControl("txtF") as TextBox;
                //TextBox txtG = GridView1.HeaderRow.FindControl("txtG") as TextBox;
                //TextBox txtH = GridView1.HeaderRow.FindControl("txtH") as TextBox;
                //TextBox txtI = GridView1.HeaderRow.FindControl("txtI") as TextBox;
                //TextBox txtJ = GridView1.HeaderRow.FindControl("txtJ") as TextBox;
   
               
                
                //SqlConnection Scon;
                //SqlDataReader Reader;
                //SqlCommand Cmd;  StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");  line = sr.ReadLine();
                //string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                //string sConnection = "Data Source="+line+"\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                //string sql;
                //sql = "Insert Into question_table VAlUES('" + user + "','" + exname + ":" + countet + "','" + exname + "','" + "MC" + "','" + txtQ.Text + "','" + txtCor.Text.Trim().ToUpper() + "','" + txtA.Text + "','" + txtB.Text + "','" + txtC.Text + "','" + txtD.Text + "','" + txtE.Text + "','" + txtF.Text + "','" + txtG.Text + "','" + txtH.Text + "','" + txtI.Text + "','" + txtJ.Text + "','" + null + "','" + null + "')";
                //Scon = new SqlConnection(sConnection);
                //Scon.Open();
                //Cmd = new SqlCommand(sql, Scon);
                //Reader = Cmd.ExecuteReader();
         
        }
        Checker(true);


        DataBind();





    }

    protected void TextBox18_TextChanged(object sender, EventArgs e)
    {
    }
    
      
    protected void GridView1_Load(object sender, EventArgs e)
    {
        try
        {
            extypeFunc1(exname); }
        catch { }
    }
    protected void TextBox2_TextChanged(object sender, EventArgs e)
    {
        
    }
    protected void GridView1_RowDeleted(object sender, GridViewDeletedEventArgs e)
    {
       
        Checker(true);
        {
            //foreach (GridViewRow row in GridView1.Rows)
            //{
            //    Label typoQ = (Label)row.FindControl("lblQuesID");

            //    {
            //        SqlConnection Scon;

            //        SqlCommand Cmd;  StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");  line = sr.ReadLine();
            //        string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
            //        string sConnection = "Data Source="+line+"\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            //        string sql;

            //        sql = "DELETE FROM answers WHERE ques_ID = '" + typoQ.Text+ "'";
            //        Scon = new SqlConnection(sConnection);
            //        Scon.Open();
            //        Cmd = new SqlCommand(sql, Scon);
            //        Cmd.ExecuteNonQuery();
            //        Scon.Close();
                
            //    }
         
            //}
        }
        checkerPerc();
    }
    protected void GridView1_RowUpdated(object sender, GridViewUpdatedEventArgs e)
    {
        checkerPerc();
    }
    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        
    }
    protected void DropDownList1_SelectedIndexChanged1(object sender, EventArgs e)
    {
       
    }
    protected void TextBox7_TextChanged(object sender, EventArgs e)
    {

    }
    protected void DropDownList2_SelectedIndexChanged(object sender, EventArgs e)
    {
      
    }
    protected void DropDownList2_SelectedIndexChanged1(object sender, EventArgs e)
    {
      
       
    }
    protected void txtC_TextChanged(object sender, EventArgs e)
    {

    }
    protected void Button1_Click1(object sender, EventArgs e)
    {
        RefreshAnswer();
        {
            SqlConnection Scon;
            SqlDataReader Reader;
            SqlCommand Cmd;  StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");  line = sr.ReadLine();
            string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
            string sConnection = "Data Source="+line+"\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;
            sql = "Select * From question_table WHERE exam_code = '" + exname + "' AND ins_id = '" + user + "'AND ques_id NOT LIKE '" + "AUO878728MchbMhajOl%" + "'";
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Reader = Cmd.ExecuteReader();

            while (Reader.Read())
            {

                countet++;

            }
            Reader.Close();
            Scon.Close();
        }
       
     

    }
    public void AnswerAdder(string control)
    {
    }
    protected void radA_CheckedChanged(object sender, EventArgs e)
    {
     
    }
    protected void radB_CheckedChanged(object sender, EventArgs e)
    {
     
    }
    protected void Button2_Click(object sender, EventArgs e)
    {
      
    }
    protected void answerStack_SelectedIndexChanged(object sender, EventArgs e)
    {

    }
    private void RefreshAnswer()
    {
       

  
    }
    protected void Button3_Click(object sender, EventArgs e)
    {
       
    }
    protected void radText_CheckedChanged(object sender, EventArgs e)
    {
        
        RefreshAnswer();
        
    }
    protected void radDiagram_CheckedChanged(object sender, EventArgs e)
    {

      
    }
    protected void imgA_Click(object sender, ImageClickEventArgs e)
    {
        FileUpload ok = new FileUpload();
      //  ok.
    }
    protected void radA_CheckedChanged1(object sender, EventArgs e)
    {

    }
    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
    {
//GridView1.SelectedIndex.ToString().Equals(TextBox1.Text);

        //TextBox txtA = (TextBox)row.FindControl("txtAu");
        //TextBox txtB = (TextBox)row.FindControl("txtBu");
        //TextBox txtC = (TextBox)row.FindControl("txtCu");
        //TextBox txtD = (TextBox)row.FindControl("txtDu");
        //TextBox txtE = (TextBox)row.FindControl("txtEu");
        //TextBox txtF = (TextBox)row.FindControl("txtFu");
        //TextBox txtG = (TextBox)row.FindControl("txtGu");
        //TextBox txtH = (TextBox)row.FindControl("txtHu");
        //TextBox txtI = (TextBox)row.FindControl("txtIu");
        //TextBox txtJ = (TextBox)row.FindControl("txtJu");

       ////         TextBox txtA = GridView1.SelectedRow.FindControl("txtAu") as TextBox;
       //         TextBox txtB = GridView1.SelectedRow.FindControl("txtBu") as TextBox;
       //         TextBox txtC = GridView1.SelectedRow.FindControl("txtCu") as TextBox;
       //         TextBox txtD = GridView1.SelectedRow.FindControl("txtDu") as TextBox;
       //         TextBox txtE = GridView1.SelectedRow.FindControl("txtEu") as TextBox;
       //         TextBox txtF = GridView1.SelectedRow.FindControl("txtFu") as TextBox;
       //         TextBox txtG = GridView1.SelectedRow.FindControl("txtGu") as TextBox;
       //         TextBox txtH = GridView1.SelectedRow.FindControl("txtHu") as TextBox;
       //         TextBox txtI = GridView1.SelectedRow.FindControl("txtIu") as TextBox;
       //         TextBox txtJ = GridView1.SelectedRow.FindControl("txtJu") as TextBox;


        // RadioButton radA = (RadioButton)row.FindControl("radAu") ;
        //RadioButton radB = (RadioButton)row.FindControl("radBu") ;
        //RadioButton radC = (RadioButton)row.FindControl("radCu") ;
        //RadioButton radD = (RadioButton)row.FindControl("radDu") ;
        //RadioButton radE = (RadioButton)row.FindControl("radEu") ;
        //RadioButton radF = (RadioButton)row.FindControl("radFu") ;
        //RadioButton radG = (RadioButton)row.FindControl("radGu") ;
        //RadioButton radH = (RadioButton)row.FindControl("radHu") ;
        //RadioButton radI = (RadioButton)row.FindControl("radIu") ;
        //RadioButton radJ = (RadioButton)row.FindControl("radJu");

       //// RadioButton radA = GridView1.SelectedRow.FindControl("radAu") as RadioButton;
       // RadioButton radB = GridView1.SelectedRow.FindControl("radBu") as RadioButton;
       // RadioButton radC = GridView1.SelectedRow.FindControl("radCu") as RadioButton;
       // RadioButton radD = GridView1.SelectedRow.FindControl("radDu") as RadioButton;
       // RadioButton radE = GridView1.SelectedRow.FindControl("radEu") as RadioButton;
       // RadioButton radF = GridView1.SelectedRow.FindControl("radFu") as RadioButton;
       // RadioButton radG = GridView1.SelectedRow.FindControl("radGu") as RadioButton;
       // RadioButton radH = GridView1.SelectedRow.FindControl("radHu") as RadioButton;
       // RadioButton radI = GridView1.SelectedRow.FindControl("radIu") as RadioButton;
       // RadioButton radJ = GridView1.SelectedRow.FindControl("radJu") as RadioButton;


    //    Label txtCO = GridView1.SelectedRow.FindControl("Label4") as Label;
      
                //if (txtCO.Text == "") 
                //{
                //    radA.Checked = true;
                //}

                //else if (txtCO.Text == txtB.Text)
                //{
                //    radB.Checked = true;
                //}
                //else if (txtCO.Text == txtC.Text)
                //{
                //    radC.Checked = true;
                //}
                //else if (txtCO.Text == txtD.Text)
                //{
                //    radD.Checked = true;
                //}
                //else if (txtCO.Text == txtE.Text)
                //{
                //    radE.Checked = true;
                //}
                //else if (txtCO.Text == txtF.Text)
                //{
                //    radF.Checked = true;
                //}
                //else if (txtCO.Text == txtG.Text)
                //{
                //    radG.Checked = true;
                //}
                //else if (txtCO.Text == txtH.Text)
                //{
                //    radH.Checked = true;
                //}
                //else if (txtCO.Text == txtI.Text)
                //{
                //    radI.Checked = true;
                //}
                //else if (txtCO.Text == txtJ.Text)
                //{
                //    radJ.Checked = true;
                //}

            
    }
    protected void LinkButton1_Click(object sender, EventArgs e)
    {

    }
    protected void imgG_Click(object sender, ImageClickEventArgs e)
    {

    }
    protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
    {
       
    }
  
    protected void drpExams_SelectedIndexChanged(object sender, EventArgs e)
    {
     
      

    }
    double easyy = 0;
    double aver = 0;
    double difi = 0;
    double allper = 0;
    double easyyPer = 0;
    double averPer = 0;
    double difiPer = 0;
    private void checkerPerc()
    {
        easyy = 0;
        aver = 0;
        difi = 0;
        allper = 0;
        easyyPer = 0;
        averPer = 0;
        difiPer = 0;
        {
            SqlConnection Scon;
            SqlDataReader Reader;
            SqlCommand Cmd;
            StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");
            line = sr.ReadLine();
            string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
            string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;
            sql = "Select * From question_table WHERE exam_code = '" + exname + "'";
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Reader = Cmd.ExecuteReader();

            while (Reader.Read())
            {
                allper++;
                Label21.Text = allper.ToString();
                if (Reader["dif"].ToString() == "Easy")
                {
                    easyy++;

                }
                else if (Reader["dif"].ToString() == "Average")
                {
                    aver++;

                }
                else if (Reader["dif"].ToString() == "Hard")
                {
                    difi++;

                }
                averPer = (aver / allper) * 100;
                averPer = Math.Round(averPer);

                Label19.Text = averPer.ToString() + "%";
              
                difiPer = (difi / allper) * 100;
                   difiPer = Math.Round(difiPer);
                Label20.Text = difiPer.ToString() + "%";
             

                easyyPer = (easyy / allper) * 100;
                easyyPer = Math.Round(easyyPer);
                Label18.Text = easyyPer.ToString() + "%";
                

                if (averPer < 30)
                {
                    Label19.ForeColor = System.Drawing.Color.Red;
                }
                else
                {
                    Label19.ForeColor = System.Drawing.Color.Black;
                }
                if (difiPer < 30)
                {
                    Label20.ForeColor = System.Drawing.Color.Red;

                }
                else
                {
                    Label20.ForeColor = System.Drawing.Color.Black;
                }
                if (easyyPer < 40)
                {
                    Label18.ForeColor = System.Drawing.Color.Red;

                }
                else
                {
                    Label18.ForeColor = System.Drawing.Color.Black;
                }
            }
            Reader.Close();
            Scon.Close();
            if ((easyy == 0) && (aver == 0) && (difi == 0))
            {
                Label18.Text = "0%";
                Label19.Text = "0%";
                Label20.Text = "0%";
            }
        }
    }


    protected void Button2_Click1(object sender, EventArgs e)
    {
        bool examexist = false;
        Page.Session["naming"] = "1";
        easyy = 0;
        aver = 0;
        difi = 0;
        allper = 0;
        easyyPer = 0;
        averPer = 0;
        difiPer = 0;
        {
            SqlConnection Scon;
            SqlDataReader Reader;
            SqlCommand Cmd;
            StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");
            line = sr.ReadLine();
            string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
            string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;
            sql = "Select * From question_table WHERE exam_code = '" + exname + "'";
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Reader = Cmd.ExecuteReader();

            while (Reader.Read())
            {
                examexist = true;
                allper++;
                Label21.Text = allper.ToString();
                if (Reader["dif"].ToString() == "Easy")
                {
                    easyy++;

                }
                else if (Reader["dif"].ToString() == "Average")
                {
                    aver++;

                }
                else if (Reader["dif"].ToString() == "Hard")
                {
                    difi++;

                }



                averPer = (aver / allper) * 100;
                averPer = Math.Round(averPer);

                Label19.Text = averPer.ToString() + "%";

                difiPer = (difi / allper) * 100;
                difiPer = Math.Round(difiPer);
                Label20.Text = difiPer.ToString() + "%";


                easyyPer = (easyy / allper) * 100;
                easyyPer = Math.Round(easyyPer);
                Label18.Text = easyyPer.ToString() + "%";


                if (averPer < 30)
                {
                    Label19.ForeColor = System.Drawing.Color.Red;
                }
                else
                {
                    Label19.ForeColor = System.Drawing.Color.Black;
                }
                if (difiPer < 30)
                {
                    Label20.ForeColor = System.Drawing.Color.Red;

                }
                else
                {
                    Label20.ForeColor = System.Drawing.Color.Black;
                }
                if (easyyPer < 40)
                {
                    Label18.ForeColor = System.Drawing.Color.Red;

                }
                else
                {
                    Label18.ForeColor = System.Drawing.Color.Black;
                }


                //if ((averPer < 30) && (difiPer < 30))
                //{
                //    Button2.Visible = false;
                //    Button8.Visible = false;
                //    Button9.Visible = false;
                //    LinkButton1.Text = "Average questions make only " + averPer.ToString() + "% of the questions and difficult make only " + difiPer.ToString() + "%. Click this link if you still want to publish.";
                //}
                //else if ((averPer < 30) && (easyyPer < 40))
                //{
                //    Button2.Visible = false;
                //    Button8.Visible = false;
                //    Button9.Visible = false;
                //    LinkButton1.Text = "Average questions make only " + averPer.ToString() + "% of the questions and easy questions make only " + easyyPer.ToString() + "%. Click this link if you still want to publish.";
                //}
                //else if ((difiPer < 30) && (easyyPer < 40))
                //{
                //    Button2.Visible = false;
                //    Button8.Visible = false;
                //    Button9.Visible = false;
                //    LinkButton1.Text = "Difficult questions make only " + difiPer.ToString() + "% of the questions and easy questions make only " + easyyPer.ToString() + "%. Click this link if you still want to publish.";
                //}
                //else if ((averPer < 30) && (easyyPer < 40) && (difiPer < 30))
                //{
                //    Button2.Visible = false;
                //    Button8.Visible = false;
                //    Button9.Visible = false;
                //    LinkButton1.Text = "Average questions make only " + averPer.ToString() + "% of the questions, easy questions make " + easyyPer.ToString() + "% and difficult " + difiPer.ToString() + "%. Click this link if you still want to publish.";
                //}
                //else if ((averPer < 30))
                //{
                //    Button2.Visible = false;
                //    Button8.Visible = false;
                //    Button9.Visible = false;
                //    LinkButton1.Text = "Average questions make only " + averPer.ToString() + "% of the items on this exam. Click this link if you still want to publish.";
                //}
                //else if ((difiPer < 30))
                //{
                //    Button2.Visible = false;
                //    Button8.Visible = false;
                //    Button9.Visible = false;
                //    LinkButton1.Text = "Difficult questions make only " + difiPer.ToString() + "% of the items on this exam. Click this link if you still want to publish.";
                //}
                //else if ((easyyPer < 40))
                //{
                //    Button2.Visible = false;
                //    Button8.Visible = false;
                //    Button9.Visible = false;
                //    LinkButton1.Text = "Easy questions make only " + easyyPer.ToString() + "% of the items on this exam. Click this link if you still want to publish.";
                //}

               
                //else
                //{
                //    Page.Session["exname"] = Label23.Text;
                //    Page.Session["user"] = user;
                //    //     Page.Session["numCol"] = basu;
                //    Page.Session["editmode"] = editmode;

                //    Response.Redirect("InsPublish.aspx");
                //}
            }
            Reader.Close();
            Scon.Close();
           
                
        }
        //RequiredFieldValidator txtQ = GridView1.HeaderRow.FindControl("RequiredFieldValidator2") as RequiredFieldValidator;
        //RequiredFieldValidator txtCor = GridView1.HeaderRow.FindControl("RequiredFieldValidator3") as RequiredFieldValidator;
        //RequiredFieldValidator txtA = GridView1.HeaderRow.FindControl("RequiredFieldValidator4") as RequiredFieldValidator;
        ////RequiredFieldValidator txtB = GridView1.HeaderRow.FindControl("txtB") as RequiredFieldValidator;
        //RequiredFieldValidator txtC = GridView1.HeaderRow.FindControl("txtC") as RequiredFieldValidator;
        //RequiredFieldValidator txtD = GridView1.HeaderRow.FindControl("txtD") as RequiredFieldValidator;
        //RequiredFieldValidator txtE = GridView1.HeaderRow.FindControl("txtE") as RequiredFieldValidator;
        //RequiredFieldValidator txtF = GridView1.HeaderRow.FindControl("txtF") as RequiredFieldValidator;
        //RequiredFieldValidator txtG = GridView1.HeaderRow.FindControl("txtG") as RequiredFieldValidator;
        //RequiredFieldValidator txtH = GridView1.HeaderRow.FindControl("txtH") as RequiredFieldValidator;
        //RequiredFieldValidator txtI = GridView1.HeaderRow.FindControl("txtI") as RequiredFieldValidator;
        //RequiredFieldValidator txtJ = GridView1.HeaderRow.FindControl("txtJ") as RequiredFieldValidator;
        //txtQ.Text = ".";
        //txtCor.Text = ".";
        //txtA.Text = ".";
        //txtQ.Enabled = false;
        //txtCor.Enabled = false;
        //txtA.Enabled = false;
        if (examexist == true)
        {
            Page.Session["exname"] = Label23.Text;
            Page.Session["user"] = user;
            //     Page.Session["numCol"] = basu;
            Page.Session["editmode"] = editmode;

            Response.Redirect("InsPublish.aspx");
        }
        else
        {
            MessageBox("Please add questions to the exam.");
        }
        
      
    }
    protected void editRow(object sender, GridViewEditEventArgs e)
    {
      //  GridView1.EditIndex = e.NewEditIndex;
        
      //  int sele = -1;
      ////  foreach (GridViewRow row in GridView1.Rows)
      //  {
      //      TextBox txtA = (TextBox)GridView1.Rows[e.NewEditIndex].FindControl("txtAu") as TextBox;
      //      TextBox txtB = (TextBox)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("txtBu");
      //      TextBox txtC = (TextBox)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("txtCu");
      //      TextBox txtD = (TextBox)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("txtDu");
      //      TextBox txtE = (TextBox)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("txtEu");
      //      TextBox txtF = (TextBox)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("txtFu");
      //      TextBox txtG = (TextBox)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("txtGu");
      //      TextBox txtH = (TextBox)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("txtHu");
      //      TextBox txtI = (TextBox)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("txtIu");
      //      TextBox txtJ = (TextBox)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("txtJu");


      //      Label lblA = (Label)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("lblAe") as Label;
      //      Label lblB = (Label)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("lblBe") as Label;
      //      Label lblC = (Label)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("lblCe") as Label;
      //      Label lblD = (Label)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("lblDe") as Label;
      //      Label lblE = (Label)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("lblEe") as Label;
      //      Label lblF = (Label)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("lblFe") as Label;
      //      Label lblG = (Label)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("lblGe") as Label;
      //      Label lblH = (Label)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("lblHe") as Label;
      //      Label lblI = (Label)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("lblIe") as Label;
      //      Label lblJ = (Label)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("lblJe") as Label;
      //      HiddenField h1 = (HiddenField)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("HiddenField1");
      //      DropDownList typo2 = (DropDownList)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("DropDownList2");
         
      //     // txtA.Text = "s";
      //      {
      //          //SqlConnection Scon;
      //          //SqlDataReader Reader;
      //          //SqlCommand Cmd;  StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");  line = sr.ReadLine();
      //          //string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
      //          //string sConnection = "Data Source="+line+"\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
      //          //string sql;
      //          //sql = "Select * From question_table WHERE ques_id = '" + h1.Value.ToString() + "'";
      //          //Scon = new SqlConnection(sConnection);
      //          //Scon.Open();
      //          //Cmd = new SqlCommand(sql, Scon);
      //          //Reader = Cmd.ExecuteReader();

      //          while (Reader.Read())
      //          {
      //              //if ((Reader["ans_j"].ToString() != "") && (Reader["ans_i"].ToString() != "") && (Reader["ans_h"].ToString() != "") && (Reader["ans_g"].ToString() != "") && (Reader["ans_f"].ToString() != "") && (Reader["ans_e"].ToString() != "") && (Reader["ans_d"].ToString() != "") && (Reader["ans_c"].ToString() != "") && (Reader["ans_b"].ToString() != "") && (Reader["ans_a"].ToString() != ""))
      //              //{
      //              //    typo2.SelectedIndex = 8;
      //              //    sele = 8;
      //              //}
      //              //else if ((Reader["ans_j"].ToString() == "") && (Reader["ans_i"].ToString() != "") && (Reader["ans_h"].ToString() != "") && (Reader["ans_g"].ToString() != "") && (Reader["ans_f"].ToString() != "") && (Reader["ans_e"].ToString() != "") && (Reader["ans_d"].ToString() != "") && (Reader["ans_c"].ToString() != "") && (Reader["ans_b"].ToString() != "") && (Reader["ans_a"].ToString() != ""))
      //              //{
      //              //    typo2.SelectedIndex = 7; sele = 7;
      //              //}
      //              //else if ((Reader["ans_j"].ToString() == "") && (Reader["ans_i"].ToString() == "") && (Reader["ans_h"].ToString() != "") && (Reader["ans_g"].ToString() != "") && (Reader["ans_f"].ToString() != "") && (Reader["ans_e"].ToString() != "") && (Reader["ans_d"].ToString() != "") && (Reader["ans_c"].ToString() != "") && (Reader["ans_b"].ToString() != "") && (Reader["ans_a"].ToString() != ""))
      //              //{
      //              //    typo2.SelectedIndex = 6; sele = 6;
      //              //}
      //              //else if ((Reader["ans_j"].ToString() == "") && (Reader["ans_i"].ToString() == "") && (Reader["ans_h"].ToString() == "") && (Reader["ans_g"].ToString() != "") && (Reader["ans_f"].ToString() != "") && (Reader["ans_e"].ToString() != "") && (Reader["ans_d"].ToString() != "") && (Reader["ans_c"].ToString() != "") && (Reader["ans_b"].ToString() != "") && (Reader["ans_a"].ToString() != ""))
      //              //{
      //              //    typo2.SelectedIndex = 5; sele = 5;
      //              //}
      //              //else if ((Reader["ans_j"].ToString() == "") && (Reader["ans_i"].ToString() == "") && (Reader["ans_h"].ToString() == "") && (Reader["ans_g"].ToString() == "") && (Reader["ans_f"].ToString() != "") && (Reader["ans_e"].ToString() != "") && (Reader["ans_d"].ToString() != "") && (Reader["ans_c"].ToString() != "") && (Reader["ans_b"].ToString() != "") && (Reader["ans_a"].ToString() != ""))
      //              //{
      //              //    typo2.SelectedIndex = 4; sele = 4;
      //              //}
      //              //else if ((Reader["ans_j"].ToString() == "") && (Reader["ans_i"].ToString() == "") && (Reader["ans_h"].ToString() == "") && (Reader["ans_g"].ToString() == "") && (Reader["ans_f"].ToString() == "") && (Reader["ans_e"].ToString() != "") && (Reader["ans_d"].ToString() != "") && (Reader["ans_c"].ToString() != "") && (Reader["ans_b"].ToString() != "") && (Reader["ans_a"].ToString() != ""))
      //              //{
      //              //    typo2.SelectedIndex = 3; sele = 3;
      //              //}
      //              //else if ((Reader["ans_j"].ToString() == "") && (Reader["ans_i"].ToString() == "") && (Reader["ans_h"].ToString() == "") && (Reader["ans_g"].ToString() == "") && (Reader["ans_f"].ToString() == "") && (Reader["ans_e"].ToString() == "") && (Reader["ans_d"].ToString() != "") && (Reader["ans_c"].ToString() != "") && (Reader["ans_b"].ToString() != "") && (Reader["ans_a"].ToString() != ""))
      //              //{
      //              //    typo2.SelectedIndex = 2; sele = 2;
      //              //}
      //              //else if ((Reader["ans_j"].ToString() == "") && (Reader["ans_i"].ToString() == "") && (Reader["ans_h"].ToString() == "") && (Reader["ans_g"].ToString() == "") && (Reader["ans_f"].ToString() == "") && (Reader["ans_e"].ToString() == "") && (Reader["ans_d"].ToString() == "") && (Reader["ans_c"].ToString() != "") && (Reader["ans_b"].ToString() != "") && (Reader["ans_a"].ToString() != ""))
      //              //{
      //              //    typo2.SelectedIndex = 1; sele = 1;
      //              //}
      //              //else if ((Reader["ans_j"].ToString() == "") && (Reader["ans_i"].ToString() == "") && (Reader["ans_h"].ToString() == "") && (Reader["ans_g"].ToString() == "") && (Reader["ans_f"].ToString() == "") && (Reader["ans_e"].ToString() == "") && (Reader["ans_d"].ToString() == "") && (Reader["ans_c"].ToString() == "") && (Reader["ans_b"].ToString() != "") && (Reader["ans_a"].ToString() != ""))
      //              //{
      //              //    typo2.SelectedIndex = 0; sele = 0;
      //              //}


      //              break;
      //          }
      //          Reader.Close();
      //          Scon.Close();
      //      }

      //      sele = 60;
      //      if (sele == 0)
      //      {
      //          txtA.Visible = true;
      //          lblA.Visible = true;
      //          txtB.Visible = true;
      //          lblB.Visible = true;
      //          txtC.Visible = false;
      //          lblC.Visible = false;
      //          txtD.Visible = false;
      //          lblD.Visible = false;
      //          txtE.Visible = false;
      //          lblE.Visible = false;
      //          txtF.Visible = false;
      //          lblF.Visible = false;
      //          txtG.Visible = false;
      //          lblG.Visible = false;
      //          txtH.Visible = false;
      //          lblH.Visible = false;
      //          txtI.Visible = false;
      //          lblI.Visible = false;
      //          txtJ.Visible = false;
      //          lblJ.Visible = false;



      //          //imgA.Visible = true;
      //          //imgB.Visible = true;
      //          //imgC.Visible = false;
      //          //imgD.Visible = false;
      //          //imgE.Visible = false;
      //          //imgF.Visible = false;
      //          //imgG.Visible = false;
      //          //imgH.Visible = false;
      //          //imgI.Visible = false;
      //          //imgJ.Visible = false;



      //      }
      //      else if (sele == 1)
      //      {
      //          txtA.Visible = true;
      //          lblA.Visible = true;
      //          txtB.Visible = true;
      //          lblB.Visible = true;
      //          txtC.Visible = true;
      //          lblC.Visible = true;
      //          txtD.Visible = false;
      //          lblD.Visible = false;
      //          txtE.Visible = false;
      //          lblE.Visible = false;
      //          txtF.Visible = false;
      //          lblF.Visible = false;
      //          txtG.Visible = false;
      //          lblG.Visible = false;
      //          txtH.Visible = false;
      //          lblH.Visible = false;
      //          txtI.Visible = false;
      //          lblI.Visible = false;
      //          txtJ.Visible = false;
      //          lblJ.Visible = false;


      //          //imgA.Visible = true;
      //          //imgB.Visible = true;
      //          //imgC.Visible = true;
      //          //imgD.Visible = false;
      //          //imgE.Visible = false;
      //          //imgF.Visible = false;
      //          //imgG.Visible = false;
      //          //imgH.Visible = false;
      //          //imgI.Visible = false;
      //          //imgJ.Visible = false;
      //      }
      //      else if (sele == 2)
      //      {
      //          txtA.Visible = true;
      //          lblA.Visible = true;
      //          txtB.Visible = true;
      //          lblB.Visible = true;
      //          txtC.Visible = true;
      //          lblC.Visible = true;
      //          txtD.Visible = true;
      //          lblD.Visible = true;
      //          txtE.Visible = false;
      //          lblE.Visible = false;
      //          txtF.Visible = false;
      //          lblF.Visible = false;
      //          txtG.Visible = false;
      //          lblG.Visible = false;
      //          txtH.Visible = false;
      //          lblH.Visible = false;
      //          txtI.Visible = false;
      //          lblI.Visible = false;
      //          txtJ.Visible = false;
      //          lblJ.Visible = false;

      //          //imgA.Visible = true;
      //          //imgB.Visible = true;
      //          //imgC.Visible = true;
      //          //imgD.Visible = true;
      //          //imgE.Visible = false;
      //          //imgF.Visible = false;
      //          //imgG.Visible = false;
      //          //imgH.Visible = false;
      //          //imgI.Visible = false;
      //          //imgJ.Visible = false;
      //      }
      //      else if (sele == 3)
      //      {
      //          txtA.Visible = true;
      //          lblA.Visible = true;
      //          txtB.Visible = true;
      //          lblB.Visible = true;
      //          txtC.Visible = true;
      //          lblC.Visible = true;
      //          txtD.Visible = true;
      //          lblD.Visible = true;
      //          txtE.Visible = true;
      //          lblE.Visible = true;
      //          txtF.Visible = false;
      //          lblF.Visible = false;
      //          txtG.Visible = false;
      //          lblG.Visible = false;
      //          txtH.Visible = false;
      //          lblH.Visible = false;
      //          txtI.Visible = false;
      //          lblI.Visible = false;
      //          txtJ.Visible = false;
      //          lblJ.Visible = false;


      //          //imgA.Visible = true;
      //          //imgB.Visible = true;
      //          //imgC.Visible = true;
      //          //imgD.Visible = true;
      //          //imgE.Visible = true;
      //          //imgF.Visible = false;
      //          //imgG.Visible = false;
      //          //imgH.Visible = false;
      //          //imgI.Visible = false;
      //          //imgJ.Visible = false;
      //      }
      //      else if (sele == 4)
      //      {
      //          txtA.Visible = true;
      //          lblA.Visible = true;
      //          txtB.Visible = true;
      //          lblB.Visible = true;
      //          txtC.Visible = true;
      //          lblC.Visible = true;
      //          txtD.Visible = true;
      //          lblD.Visible = true;
      //          txtE.Visible = true;
      //          lblE.Visible = true;
      //          txtF.Visible = true;
      //          lblF.Visible = true;
      //          txtG.Visible = false;
      //          lblG.Visible = false;
      //          txtH.Visible = false;
      //          lblH.Visible = false;
      //          txtI.Visible = false;
      //          lblI.Visible = false;
      //          txtJ.Visible = false;
      //          lblJ.Visible = false;


      //          //imgA.Visible = true;
      //          //imgB.Visible = true;
      //          //imgC.Visible = true;
      //          //imgD.Visible = true;
      //          //imgE.Visible = true;
      //          //imgF.Visible = true;
      //          //imgG.Visible = false;
      //          //imgH.Visible = false;
      //          //imgI.Visible = false;
      //          //imgJ.Visible = false;
      //      }
      //      else if (sele == 5)
      //      {
      //          txtA.Visible = true;
      //          lblA.Visible = true;
      //          txtB.Visible = true;
      //          lblB.Visible = true;
      //          txtC.Visible = true;
      //          lblC.Visible = true;
      //          txtD.Visible = true;
      //          lblD.Visible = true;
      //          txtE.Visible = true;
      //          lblE.Visible = true;
      //          txtF.Visible = true;
      //          lblF.Visible = true;
      //          txtG.Visible = true;
      //          lblG.Visible = true;
      //          txtH.Visible = false;
      //          lblH.Visible = false;
      //          txtI.Visible = false;
      //          lblI.Visible = false;
      //          txtJ.Visible = false;
      //          lblJ.Visible = false;


      //          //imgA.Visible = true;
      //          //imgB.Visible = true;
      //          //imgC.Visible = true;
      //          //imgD.Visible = true;
      //          //imgE.Visible = true;
      //          //imgF.Visible = true;
      //          //imgG.Visible = true;
      //          //imgH.Visible = false;
      //          //imgI.Visible = false;
      //          //imgJ.Visible = false;
      //      }
      //      else if (sele == 6)
      //      {
      //          txtA.Visible = true;
      //          lblA.Visible = true;
      //          txtB.Visible = true;
      //          lblB.Visible = true;
      //          txtC.Visible = true;
      //          lblC.Visible = true;
      //          txtD.Visible = true;
      //          lblD.Visible = true;
      //          txtE.Visible = true;
      //          lblE.Visible = true;
      //          txtF.Visible = true;
      //          lblF.Visible = true;
      //          txtG.Visible = true;
      //          lblG.Visible = true;
      //          txtH.Visible = true;
      //          lblH.Visible = true;
      //          txtI.Visible = false;
      //          lblI.Visible = false;
      //          txtJ.Visible = false;
      //          lblJ.Visible = false;


      //          //imgA.Visible = true;
      //          //imgB.Visible = true;
      //          //imgC.Visible = true;
      //          //imgD.Visible = true;
      //          //imgE.Visible = true;
      //          //imgF.Visible = true;
      //          //imgG.Visible = true;
      //          //imgH.Visible = true;
      //          //imgI.Visible = false;
      //          //imgJ.Visible = false;
      //      }
      //      else if (sele == 7)
      //      {
      //          txtA.Visible = true;
      //          lblA.Visible = true;
      //          txtB.Visible = true;
      //          lblB.Visible = true;
      //          txtC.Visible = true;
      //          lblC.Visible = true;
      //          txtD.Visible = true;
      //          lblD.Visible = true;
      //          txtE.Visible = true;
      //          lblE.Visible = true;
      //          txtF.Visible = true;
      //          lblF.Visible = true;
      //          txtG.Visible = true;
      //          lblG.Visible = true;
      //          txtH.Visible = true;
      //          lblH.Visible = true;
      //          txtI.Visible = true;
      //          lblI.Visible = true;
      //          txtJ.Visible = false;
      //          lblJ.Visible = false;


      //          //imgA.Visible = true;
      //          //imgB.Visible = true;
      //          //imgC.Visible = true;
      //          //imgD.Visible = true;
      //          //imgE.Visible = true;
      //          //imgF.Visible = true;
      //          //imgG.Visible = true;
      //          //imgH.Visible = true;
      //          //imgI.Visible = true;
      //          //imgJ.Visible = false;
      //      }
      //      else if (sele == 8)
      //      {
      //          txtA.Visible = true;
      //          lblA.Visible = true;
      //          txtB.Visible = true;
      //          lblB.Visible = true;
      //          txtC.Visible = true;
      //          lblC.Visible = true;
      //          txtD.Visible = true;
      //          lblD.Visible = true;
      //          txtE.Visible = true;
      //          lblE.Visible = true;
      //          txtF.Visible = true;
      //          lblF.Visible = true;
      //          txtG.Visible = true;
      //          lblG.Visible = true;
      //          txtH.Visible = true;
      //          lblH.Visible = true;
      //          txtI.Visible = true;
      //          lblI.Visible = true;
      //          txtJ.Visible = true;
      //          lblJ.Visible = true;

      //          //imgA.Visible = true;
      //          //imgB.Visible = true;
      //          //imgC.Visible = true;
      //          //imgD.Visible = true;
      //          //imgE.Visible = true;
      //          //imgF.Visible = true;
      //          //imgG.Visible = true;
      //          //imgH.Visible = true;
      //          //imgI.Visible = true;
      //          //imgJ.Visible = true;
      //      }
      //      GridView1.DataBind();
      //  }
        //GridView1.EditIndex = -1;



        //TextBox txtNo = (TextBox)GridView1.Rows[GridView1.EditIndex].FindControl("studNo") as TextBox;
        //TextBox txtNa = (TextBox)GridView1.Rows[GridView1.EditIndex].FindControl("studNa") as TextBox;
        

        //DataBind();
       
    }
    protected void list(object sender, EventArgs e)
    {
    
        //DropDownList lblA = (DropDownList)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("DropDownList2") as DropDownList;
        //HiddenField lblB = (HiddenField)GridView1.Rows[e.NewEditIndex].Cells[0].FindControl("HiddenField1") as HiddenField;
    }
    protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
    {

    }
    protected void Button3_Click1(object sender, EventArgs e)
    {
   //     panMC.Visible = true;
    }
    protected void ToFadd(object sender, EventArgs e)
    {
       
       


    }
    protected void RadioButton2_CheckedChanged(object sender, EventArgs e)
    {
      
    }
    protected void RadioButton1_CheckedChanged(object sender, EventArgs e)
    {
    }
    protected void Button4_Click(object sender, EventArgs e)
    {
        changeit(2);
        Page.Session["currendiv"] = "2";
        //panTOF.Visible = false;
        //panMC.Visible = false;
        //panIden.Visible = true;
        RadioButton3.Checked = true;
        refreshDropdown();
    }
    protected void Button3_Click2(object sender, EventArgs e)
    {
        changeit(1);
       // Page.Session["currendiv"] = "0";
        //panTOF.Visible = false;
        //panIden.Visible = false;
        Page.Session["currendiv"] = "0";
        //panMC.Visible = true;
        radmc.Checked = true;
        refreshDropdown();
    
       
    }
    protected void Button6_Click(object sender, EventArgs e)
    {
        panMC.Visible = false;
        panIden.Visible = true;
    }
    protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        
        
    }
    protected void emptyAddTF(object sender, EventArgs e)
    {
       
         
    }
    protected void Idenadd(object sender, EventArgs e)
    {
       
        {

            TextBox txtQ = GridView3.HeaderRow.FindControl("txtQues") as TextBox;
            TextBox txtCors = GridView3.HeaderRow.FindControl("txtAns") as TextBox;
            Label lblloc = GridView3.HeaderRow.FindControl("Label10") as Label;
            DropDownList lblLO = GridView3.HeaderRow.FindControl("DropDownList1") as DropDownList;
         
            SqlConnection Scon;
            SqlDataReader Reader;
            SqlCommand Cmd;  StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");  line = sr.ReadLine();
            string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
            string sConnection = "Data Source="+line+"\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql="";
            if (DropDownList3.Text == "Easy")
            {
                sql = "Insert Into question_table VAlUES('" + user + "','" + exname + ":" + System.DateTime.Now.TimeOfDay.ToString() + "','" + exname + "','" + "Iden" + "','" + txtQ.Text + "','" + txtCors.Text + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + null + "','" + "" + "','" + lblloc.Text + "','" + lblLO.Text + "','" + lblLO.Text + "','" + int.Parse(Labelde.Text) + "','" + DropDownList3.Text + "')";
            }
            if (DropDownList3.Text == "Average")
            {
                sql = "Insert Into question_table VAlUES('" + user + "','" + exname + ":" + System.DateTime.Now.TimeOfDay.ToString() + "','" + exname + "','" + "Iden" + "','" + txtQ.Text + "','" + txtCors.Text + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + null + "','" + "" + "','" + lblloc.Text + "','" + lblLO.Text + "','" + lblLO.Text + "','" + int.Parse(Labelda.Text) + "','" + DropDownList3.Text + "')";
            }
            if (DropDownList3.Text == "Hard")
            {
                sql = "Insert Into question_table VAlUES('" + user + "','" + exname + ":" + System.DateTime.Now.TimeOfDay.ToString() + "','" + exname + "','" + "Iden" + "','" + txtQ.Text + "','" + txtCors.Text + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + null + "','" + "" + "','" + lblloc.Text + "','" + lblLO.Text + "','" + lblLO.Text + "','" + int.Parse(Labeldd.Text) + "','" + DropDownList3.Text + "')";
            } 
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Reader = Cmd.ExecuteReader();

        }
        


        DataBind();

    }
    protected void IdenaddEm(object sender, EventArgs e)
    {
      
        try
        {

            {

                TextBox txtQ = (TextBox)GridView3.Controls[0].Controls[0].FindControl("txtQues") as TextBox;
                TextBox txtCors = (TextBox)GridView3.Controls[0].Controls[0].FindControl("TextBox1") as TextBox;
                //  Label lblloc = GridView3.HeaderRow.FindControl("Label10") as Label;
                SqlConnection Scon;
                SqlDataReader Reader;
                SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
                string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                string sql="";
                if (DropDownList3.Text == "Easy")
                {
                    sql = "Insert Into question_table VAlUES('" + user + "','" + exname + ":" + System.DateTime.Now.TimeOfDay.ToString() + "','" + exname + "','" + "Iden" + "','" + txtQ.Text + "','" + txtCors.Text + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + null + "','" + "" + "','" + "" + "','" + "" + "','" + int.Parse(Labelde.Text) + "','" + DropDownList3.Text + "')";

                }
                if (DropDownList3.Text == "Average")
                {
                    sql = "Insert Into question_table VAlUES('" + user + "','" + exname + ":" + System.DateTime.Now.TimeOfDay.ToString() + "','" + exname + "','" + "Iden" + "','" + txtQ.Text + "','" + txtCors.Text + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + null + "','" + "" + "','" + "" + "','" + "" + "','" + int.Parse(Labelda.Text) + "','" + DropDownList3.Text + "')";
                }
                if (DropDownList3.Text == "Hard")
                {
                    sql = "Insert Into question_table VAlUES('" + user + "','" + exname + ":" + System.DateTime.Now.TimeOfDay.ToString() + "','" + exname + "','" + "Iden" + "','" + txtQ.Text + "','" + txtCors.Text + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + null + "','" + "" + "','" + "" + "','" + "" + "','" + int.Parse(Labeldd.Text) + "','" + DropDownList3.Text + "')";

                }
                //    sql = "Insert Into question_table VAlUES('" + user + "','" + exname + ":" + System.DateTime.Now.TimeOfDay.ToString() + "','" + exname + "','" + "Iden" + "','" + txtQ.Text + "','" + txtCors.Text + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + "" + "','" + null + "','" + "" + "','" + lblloc.Text + "','" + "" + "')";
                Scon = new SqlConnection(sConnection);
                Scon.Open();
                Cmd = new SqlCommand(sql, Scon);
                Reader = Cmd.ExecuteReader();

            }
            DataBind();
        }
        catch { }

    }
    protected void Button5_Click(object sender, EventArgs e)
    {
        changeit(3);
        Page.Session["currendiv"] = "3";
        //panIden.Visible = false;
        //panMC.Visible = false;
        //panTOF.Visible = true;   
        RadioButton2.Checked = true;
        refreshDropdown();
    }
    protected void drpChoiceMulEmpty(object sender, EventArgs e)
    {
       
          
        
      
    }
    protected void Button6_Click1(object sender, EventArgs e)
    {
        
    }
    protected void Button7_Click(object sender, EventArgs e)
    {
     
    }
    protected void radTextEmMul(object sender, EventArgs e)
    {
     
    }
    protected void radDiaEmMul(object sender, EventArgs e)
    {
      
    }
    protected void uploadMul(object sender, EventArgs e)
    {
     
    }
    private void extypeFunc1(string type)
    {
    
    }
    private void extypeFunc2(string type)
    {
     

    }
    private void extypeFunc3(string type)
    {
    
    }
    protected void GridView3_RowCreated(object sender, GridViewRowEventArgs e)
    {
        try
        {

            foreach (GridViewRow row in GridView3.Rows)
            {
                
                ImageButton ImgB = (ImageButton)row.FindControl("ImageButton2");
                if (ImgB.ImageUrl == "")
                {
                    ImgB.Visible = false;
                }
                else
                {
                    ImgB.Visible = true;
                }

            }
        }
        catch { }
    }
    protected void radDiaIden(object sender, EventArgs e)
    {
        
    }
    protected void radTextIden(object sender, EventArgs e)
    {
        ImageButton imgQ = (ImageButton)GridView3.Controls[0].Controls[0].FindControl("imgQues");
        Label lblloc = (Label)GridView3.Controls[0].Controls[0].FindControl("Label10");
        FileUpload lblB = (FileUpload)GridView3.Controls[0].Controls[0].FindControl("FileUpload1");
        Button btnUpload = (Button)GridView3.Controls[0].Controls[0].FindControl("Button7");

        lblB.Visible = false;
        btnUpload.Visible = false;
        lblloc.Text = "";
        imgQ.Visible = false;
        imgQ.ImageUrl = "~/Images/NoImage_small.png";
    }
    protected void upIden(object sender, EventArgs e)
    {
        ImageButton imgQ = (ImageButton)GridView3.Controls[0].Controls[0].FindControl("imgQues");
        Label lblloc = (Label)GridView3.Controls[0].Controls[0].FindControl("Label10");
        FileUpload lblB = (FileUpload)GridView3.Controls[0].Controls[0].FindControl("FileUpload1");

        if ((lblB.HasFile))
        {
            //  try
            {
                string uploadFolder = Request.PhysicalApplicationPath + "ImageData\\";
                lblB.SaveAs(uploadFolder + lblB.FileName);

                lblloc.Text = "~/ImageData/" + lblB.FileName;
                imgQ.ImageUrl = lblloc.Text;
            }

        }

    }
    protected void GridView2_RowCreated(object sender, GridViewRowEventArgs e)
    {
       
    }
    protected void radTextToF(object sender, EventArgs e)
    {
     
    }
    string awoo = "";
    protected void uptof(object sender, EventArgs e)
    {
       
        if ((FileUpload1.HasFile))
        {
            //  try
            {
                string uploadFolder = Request.PhysicalApplicationPath + "ImageData\\";
                FileUpload1.SaveAs(uploadFolder + FileUpload1.FileName);

               Label12.Text = "~/ImageData/" + FileUpload1.FileName;
               imgQues.ImageUrl = Label12.Text;
                
            }
            if (RadioButton2.Checked == true)
            {
                RadioButton2.Checked = true;
                panMC.Visible = false;
                panTOF.Visible = false;
                panIden.Visible = true;

            }
            if (RadioButton3.Checked == true)
            {
                RadioButton3.Checked = true;
                panMC.Visible = false;
                panTOF.Visible = true;
                panIden.Visible = false;
            }
            if (radmc.Checked == true)
            {
                radmc.Checked = true;
                panMC.Visible = true;
                panTOF.Visible = false;
                panIden.Visible = false;
            }

        }
    }
    protected void raddiatof(object sender, EventArgs e)
    {
        //ImageButton imgQ = GridView2.HeaderRow.FindControl("imgQues") as ImageButton;
        //Label lblloc = GridView2.HeaderRow.FindControl("Label10") as Label;
        //FileUpload lblB = GridView2.HeaderRow.FindControl("FileUpload1") as FileUpload;
        //Button btnUpload = GridView2.HeaderRow.FindControl("Button7") as Button;

        //lblB.Visible = true;
        //btnUpload.Visible = true;

        //lblloc.Text = "";
        //imgQ.Visible = true;
    }
    protected void Button8_Click(object sender, EventArgs e)
    {
        Page.Session["exname"] = Label23.Text;
        Page.Session["user"] = user;
        //     Page.Session["numCol"] = basu;


        Response.Redirect("InsCreateExam.aspx");
    }
    string examtime = "";
    protected void Button9_Click(object sender, EventArgs e)
    {
        {
            SqlConnection Scon;
            SqlDataReader Reader;
            SqlCommand Cmd;
            StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");
            line = sr.ReadLine();
            string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;
            sql = "Select * From exams WHERE exname = '" + exname + "'";
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Reader = Cmd.ExecuteReader();

            while (Reader.Read())
            {
                examtime = (Reader["duration"].ToString());
            }

            Reader.Close();
            Scon.Close();
        }
        {
            SqlConnection Scon;
            SqlCommand Cmd;
            StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");
            line = sr.ReadLine();
            string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;
            sql = "UPDATE  exam_results SET d_taken ='" + "(SUBJECTED FOR RETAKE)" + "', d_close ='" + "NOT TAKEN" + "', t_left ='" + examtime + "', take_no ='" + "0" + "' WHERE exam_code='" + exname + "' AND d_close <>'" + "NOT TAKEN" + "'";
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Cmd.ExecuteNonQuery();
            Scon.Close();


        }
        Page.Session["exname"] = Label23.Text;
        Page.Session["user"] = user; 
        Page.Session["message"] = "The test has been modified!";
        Response.Redirect("InsCreateExam.aspx");
    }
    protected void GridView3_DataBound(object sender, EventArgs e)
    {
     
    }
    string questionsss="";
    protected void GridView2_Load(object sender, EventArgs e)
    {
        try
        {
            extypeFunc2(exname);
        }
        catch { }
    }
    protected void GridView3_Load(object sender, EventArgs e)
    {
        try
        {
            extypeFunc3(exname);
        }
        catch { }
    }
    private void changeit(int changes)
    {
        Button2.Visible = true;
        Button8.Visible = true;
        if (editmode == "0")
        {
            Button9.Visible = false;
        }
        else if (editmode == "1")
        {
            Button9.Visible = true;
        }
        else if (editmode == "2")
        {
            Button9.Visible = false;
        }
        LinkButton1.Text = "";
        if (changes == 1)
        {
            Button3.BackColor = System.Drawing.Color.White;
            Button4.BackColor = System.Drawing.Color.Gray;
            Button5.BackColor = System.Drawing.Color.Gray;

            GridView1.Visible = true;
            GridView3.Visible = false;
            GridViewToF.Visible = false; panTOF.Visible = false;
            panIden.Visible = false;
            panMC.Visible = true;
            RadioButton2.Checked = false;
            radmc.Checked = true;
           // TextBox1.Visible = false;
        }
        else if (changes == 2)
        {
            Button3.BackColor = System.Drawing.Color.Gray;
            Button4.BackColor = System.Drawing.Color.White;
            Button5.BackColor = System.Drawing.Color.Gray;
            GridView1.Visible = false;
            GridView3.Visible = false;
            GridViewToF.Visible = true; panMC.Visible = false;
            panTOF.Visible = true;
            panIden.Visible = false;

            RadioButton3.Checked = true; 
            RadioButton2.Checked = false;
            radmc.Checked = false;
           // TextBox1.Visible = false;
        }
        else if (changes == 3)
        {
            RadioButton3.Checked = false; 
            RadioButton2.Checked = true;
            radmc.Checked = false;
            Button3.BackColor = System.Drawing.Color.Gray;
            Button4.BackColor = System.Drawing.Color.Gray;
            Button5.BackColor = System.Drawing.Color.White;

            GridView1.Visible = false;
            GridView3.Visible = true;
            GridViewToF.Visible = false;
            
            panMC.Visible = false;
            panTOF.Visible = false;
            panIden.Visible = true;
           // TextBox1.Visible = false;
          
        }
        else if (changes == 4)
        {
            RadioButton3.Checked = false;
            RadioButton2.Checked = false;
            radmc.Checked = false;
          //  TextBox1.Visible = true;
            Button3.BackColor = System.Drawing.Color.Gray;
            Button4.BackColor = System.Drawing.Color.Gray;
            Button5.BackColor = System.Drawing.Color.White;

            GridView1.Visible = false;
            GridView3.Visible = true;
            GridViewToF.Visible = false;

            panMC.Visible = false;
            panTOF.Visible = false;
            panIden.Visible = false;


        }
    }

    protected void RadioButton1_CheckedChanged1(object sender, EventArgs e)
    {
        if (radmc.Checked == true)
        {
            Page.Session["currendiv"] = "0";
           
         
         //   radmc.Checked = true;

            changeit(1);
            //GridView1.Visible = true;
            //GridViewToF.Visible = false;
            //GridView3.Visible = false;
            GridView1.DataBind();
        }
       
    }
    protected void RadioButton3_CheckedChanged(object sender, EventArgs e)
    {
      if (RadioButton3.Checked == true)
        {
            Page.Session["currendiv"] = "2";
           
            changeit(2);
            //GridView1.Visible = false;
            //GridViewToF.Visible = true;
            //GridView3.Visible = false;
            GridViewToF.DataBind();
        }
        
    }
    protected void RadioButton2_CheckedChanged1(object sender, EventArgs e)
    {
        if (RadioButton2.Checked == true)
        {
            Page.Session["currendiv"] = "3";
        

            changeit(3);
            //GridView1.Visible = false;
            //GridViewToF.Visible = false;
            //GridView3.Visible = true;
            GridView3.DataBind();
        }
    }
    public string idmaker()
    {
        string idss = System.DateTime.Now.ToShortDateString() + ":" + System.DateTime.Now.Hour.ToString() + ":" + System.DateTime.Now.Minute.ToString() + ":" + System.DateTime.Now.Second.ToString() + ":" + System.DateTime.Now.Millisecond.ToString();
        return idss;
    }
    public void MessageBox(string msg)
    {
        Label lbl = new Label();
        lbl.Text = "<script language='javascript'>" + Environment.NewLine + "window.alert('" + msg + "')</script>";
        Page.Controls.Add(lbl);
    }string tr = "";
    string fa = "";
    bool stati = true;
    string weeknow = "";
    protected void add(object sender, EventArgs e)
    {
        refreshDropdown();
        //currendiv = "3";
        ////iden
        //currendiv == "2";
        //    //tof
        //currendiv == "0";
        //    //mc
        
        //txtQ.Text.Replace("<", "");
        if ((txtQ.Text.Contains("`")) || (txtQ.Text.Contains("^")) || (txtQ.Text.Contains("<")) || (txtQ.Text.Contains(">")) || (txtQ.Text.Contains("#")) || (txtQ.Text.Contains("{")) || (txtQ.Text.Contains("}")) || (txtQ.Text.Contains("*")))
        {
           
            MessageBox("[Question] contains invalid characters.");
        }
        else if ((mccor.Text.Contains("`")) || (mccor.Text.Contains("^")) || (mccor.Text.Contains("<")) || (mccor.Text.Contains(">")) || (mccor.Text.Contains("#")) || (mccor.Text.Contains("{")) || (mccor.Text.Contains("}")) || (mccor.Text.Contains("*")))
        {
            MessageBox("[Answer] contains invalid characters.");
        }
         else if ((mcb.Text.Contains("`")) || (mcb.Text.Contains("^")) || (mcb.Text.Contains("<")) || (mcb.Text.Contains(">")) || (mcb.Text.Contains("#")) || (mcb.Text.Contains("{")) || (mcb.Text.Contains("}")) || (mcb.Text.Contains("*")))
        {
            MessageBox("[Choice #2] contains invalid characters.");
        }
         else if ((mcc.Text.Contains("`")) || (mcc.Text.Contains("^")) || (mcc.Text.Contains("<")) || (mcc.Text.Contains(">")) || (mcc.Text.Contains("#")) || (mcc.Text.Contains("{")) || (mcc.Text.Contains("}")) || (mcc.Text.Contains("*")))
        {
            MessageBox("[Choice #3] contains invalid characters.");
        }
         else if ((txtidenAns.Text.Contains("`")) || (txtidenAns.Text.Contains("^")) || (txtidenAns.Text.Contains("<")) || (txtidenAns.Text.Contains(">")) || (txtidenAns.Text.Contains("#")) || (txtidenAns.Text.Contains("{")) || (txtidenAns.Text.Contains("}")) || (txtidenAns.Text.Contains("*")))
        {
            MessageBox("[Answer] contains invalid characters.");
        }
           
        else
        {
            {
                
                double babalu = 0;
                babalu = txtQ.Text.Length;
                double babaji = ((babalu * .75));
                babalu = Math.Round(babaji, 0);
                int newbabalu = Convert.ToInt32(babalu);
                // MessageBox(newbabalu.ToString());
                SqlConnection Scon;
                SqlDataReader Reader;
                SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
                string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                string sql;
                sql = "Select week From course_topics WHERE   topic_id LIKE '" + course + "%' AND l_o = '" + txtLO.Text + "'";
                Scon = new SqlConnection(sConnection);
                Scon.Open();
                Cmd = new SqlCommand(sql, Scon);
                Reader = Cmd.ExecuteReader();

                while (Reader.Read())
                {
                    weeknow = (Reader["week"].ToString());
                    //  stati = false;

                }
                Reader.Close();
                Scon.Close();
            }
            if (CheckBox1.Checked == true)
            {
                {
                    double babalu = 0;
                    babalu = txtQ.Text.Length;
                    double babaji = ((babalu * .75));
                    babalu = Math.Round(babaji, 0);
                    int newbabalu = Convert.ToInt32(babalu);
                    // MessageBox(newbabalu.ToString());
                    SqlConnection Scon;
                    SqlDataReader Reader;
                    SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
                    string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                    string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                    string sql;
                    sql = "Select ques_desc From question_table WHERE ques_desc LIKE '" + txtQ.Text.Remove(newbabalu) + "%'";
                    Scon = new SqlConnection(sConnection);
                    Scon.Open();
                    Cmd = new SqlCommand(sql, Scon);
                    Reader = Cmd.ExecuteReader();

                    while (Reader.Read())
                    {
                        questionsss = (Reader["ques_desc"].ToString());
                        stati = false;

                    }
                    Reader.Close();
                    Scon.Close();
                }
                {
                    double babalu = 0;
                    babalu = txtQ.Text.Length;
                    double babaji = ((babalu * .35));
                    babalu = Math.Round(babaji, 0);
                    int newbabalu = Convert.ToInt32(babalu); //MessageBox(newbabalu.ToString());
                    SqlConnection Scon;
                    SqlDataReader Reader;
                    SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
                    string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                    string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                    string sql;
                    sql = "Select ques_desc From question_table WHERE ques_desc LIKE '%" + txtQ.Text.Substring(newbabalu) + "'";
                    Scon = new SqlConnection(sConnection);
                    Scon.Open();
                    Cmd = new SqlCommand(sql, Scon);
                    Reader = Cmd.ExecuteReader();

                    while (Reader.Read())
                    {
                        questionsss = (Reader["ques_desc"].ToString());
                        stati = false;

                    }
                    Reader.Close();
                    Scon.Close();
                }
            }
            if (stati == true)
            {
                if (currendiv == "0")
                {
                    {
                        SqlConnection Scon;
                        SqlDataReader Reader;
                        SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
                        string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                        string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                        string sql;
                        sql = "Select * From question_table WHERE exam_code = '" + exname + "' AND ins_id = '" + user + "'";
                        Scon = new SqlConnection(sConnection);
                        Scon.Open();
                        Cmd = new SqlCommand(sql, Scon);
                        Reader = Cmd.ExecuteReader();

                        while (Reader.Read())
                        {

                            countet++;

                        }
                        Reader.Close();
                        Scon.Close();
                    }
                    {//
                        SqlConnection Scon;
                        SqlDataReader Reader;
                        SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
                        string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                        string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                        string sql="";

                        if (DropDownList3.Text == "Easy")
                        {
                            sql = "Insert Into question_table VAlUES('" + user + "','" + exname +idmaker() + ":" + countet + "','" + exname + "','" + "MC" + "','" + txtQ.Text.Trim() + "','" + mccor.Text.Trim() + "','" + mcb.Text.Trim() + "','" + mcc.Text.Trim() + "','" + mcd.Text.Trim() + "','" + mce.Text.Trim() + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + weeknow + "','" + null + "','" + Label12.Text + "','" + txtLO.Text.Trim().ToUpper() + "','" + txtCO.Text.Trim().ToUpper() + "','" + "databank" + "','" + int.Parse(Labelde.Text) + "','" + DropDownList3.Text + "')";
                    
                       
                        }
                        if (DropDownList3.Text == "Average")
                        {
                            sql = "Insert Into question_table VAlUES('" + user + "','" + exname + idmaker() + ":" + countet + "','" + exname + "','" + "MC" + "','" + txtQ.Text.Trim() + "','" + mccor.Text.Trim() + "','" + mcb.Text.Trim() + "','" + mcc.Text.Trim() + "','" + mcd.Text.Trim() + "','" + mce.Text.Trim() + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + weeknow + "','" + null + "','" + Label12.Text + "','" + txtLO.Text.Trim().ToUpper() + "','" + txtCO.Text.Trim().ToUpper() + "','" + "databank" + "','" + int.Parse(Labelda.Text) + "','" + DropDownList3.Text + "')";
                    
                        }
                        if (DropDownList3.Text == "Hard")
                        {
                            sql = "Insert Into question_table VAlUES('" + user + "','" + exname + idmaker() + ":" + countet + "','" + exname + "','" + "MC" + "','" + txtQ.Text.Trim() + "','" + mccor.Text.Trim() + "','" + mcb.Text.Trim() + "','" + mcc.Text.Trim() + "','" + mcd.Text.Trim() + "','" + mce.Text.Trim() + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + weeknow + "','" + null + "','" + Label12.Text + "','" + txtLO.Text.Trim().ToUpper() + "','" + txtCO.Text.Trim().ToUpper() + "','" + "databank" + "','" + int.Parse(Labeldd.Text) + "','" + DropDownList3.Text + "')";
                    

                        }
                        Scon = new SqlConnection(sConnection);
                        Scon.Open();
                        Cmd = new SqlCommand(sql, Scon);
                        Reader = Cmd.ExecuteReader();
                        Scon.Close();
                        Reader.Close();
                        MessageBox("The item has been added");
                        Label12.Text = "";
                        GridView1.DataBind();

                    }

                }
                if (currendiv == "3")
                {
                    {
                        SqlConnection Scon;
                        SqlDataReader Reader;
                        SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
                        string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                        string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                        string sql;
                        sql = "Select * From question_table WHERE exam_code = '" + exname + "' AND ins_id = '" + user + "'AND ques_id NOT LIKE '" + "AUO878728MchbMhajOl%" + "'";
                        Scon = new SqlConnection(sConnection);
                        Scon.Open();
                        Cmd = new SqlCommand(sql, Scon);
                        Reader = Cmd.ExecuteReader();

                        while (Reader.Read())
                        {

                            countet++;

                        }
                        Reader.Close();
                        Scon.Close();
                    }
                    {
                        SqlConnection Scon;
                        SqlDataReader Reader;
                        SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
                        string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                        string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                        string sql="";
                        if (DropDownList3.Text == "Easy")
                        {
                            sql = "Insert Into question_table VAlUES('" + user + "','" + exname + idmaker() + ":" + countet + "','" + exname + "','" + "Iden" + "','" + txtQ.Text.Trim() + "','" + txtidenAns.Text.Trim() + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + weeknow + "','" + null + "','" + Label12.Text + "','" + txtLO.Text.Trim().ToUpper() + "','" + txtCO.Text.Trim().ToUpper() + "','" + "databank" + "','" + int.Parse(Labelde.Text) + "','" + DropDownList3.Text + "')";

                        }
                        if (DropDownList3.Text == "Average")
                        {
                            sql = "Insert Into question_table VAlUES('" + user + "','" + exname + idmaker() + ":" + countet + "','" + exname + "','" + "Iden" + "','" + txtQ.Text.Trim() + "','" + txtidenAns.Text.Trim() + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + weeknow + "','" + null + "','" + Label12.Text + "','" + txtLO.Text.Trim().ToUpper() + "','" + txtCO.Text.Trim().ToUpper() + "','" + "databank" + "','" + int.Parse(Labelda.Text) + "','" + DropDownList3.Text + "')";

                        }
                        if (DropDownList3.Text == "Hard")
                        {
                            sql = "Insert Into question_table VAlUES('" + user + "','" + exname + idmaker() + ":" + countet + "','" + exname + "','" + "Iden" + "','" + txtQ.Text.Trim() + "','" + txtidenAns.Text.Trim() + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + weeknow + "','" + null + "','" + Label12.Text + "','" + txtLO.Text.Trim().ToUpper() + "','" + txtCO.Text.Trim().ToUpper() + "','" + "databank" + "','" + int.Parse(Labeldd.Text) + "','" + DropDownList3.Text + "')";


                        }
                        Scon = new SqlConnection(sConnection);
                        Scon.Open();
                        Cmd = new SqlCommand(sql, Scon);
                        Reader = Cmd.ExecuteReader();
                        Scon.Close();
                        Reader.Close();
                        MessageBox("The item has been added");
                        GridView3.DataBind();
                        Label12.Text = "";
                        panTOF.Visible = false;
                        panMC.Visible = false;
                        panIden.Visible = true;


                    }
                }
                if (currendiv == "2")
                {
                    if (RadioButton4.Checked == true)
                    {
                        tr = "True";
                        fa = "False";
                    }
                    else
                    {
                        tr = "False";
                        fa = "True";
                    }
                    {
                        SqlConnection Scon;
                        SqlDataReader Reader;
                        SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
                        string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                        string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                        string sql;
                        sql = "Select * From question_table WHERE exam_code = '" + exname + "' AND ins_id = '" + user + "'AND ques_id NOT LIKE '" + "AUO878728MchbMhajOl%" + "'";
                        Scon = new SqlConnection(sConnection);
                        Scon.Open();
                        Cmd = new SqlCommand(sql, Scon);
                        Reader = Cmd.ExecuteReader();

                        while (Reader.Read())
                        {

                            countet++;

                        }
                        Reader.Close();
                        Scon.Close();
                    }
                    {
                        SqlConnection Scon;
                        SqlDataReader Reader;
                        SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
                        string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
                        string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                        string sql="";
                     
                        if (DropDownList3.Text == "Easy")
                        {
                          //  sql = "Insert Into question_table VAlUES('" + user + "','" + exname + System.DateTime.Now.Millisecond.ToString().Substring(0, 2) + ":" + countet + "','" + exname + "','" + "Iden" + "','" + txtQ.Text.Trim() + "','" + txtidenAns.Text.Trim() + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + weeknow + "','" + null + "','" + Label12.Text + "','" + txtLO.Text.Trim().ToUpper() + "','" + txtCO.Text.Trim().ToUpper() + "','" + "databank" + "','" + int.Parse(Labelde.Text) + "','" + DropDownList3.Text + "')";
                            sql = "Insert Into question_table VAlUES('" + user + "','" + exname +idmaker() + ":" + countet + "','" + exname + "','" + "ToF" + "','" + txtQ.Text.Trim().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + tr.ToUpper().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + fa.ToUpper().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + weeknow + "','" + null + "','" + Label12.Text.Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + txtLO.Text.Trim().ToUpper() + "','" + txtCO.Text.Trim().ToUpper().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + "databank" + "','" + int.Parse(Labelde.Text) + "','" + DropDownList3.Text + "')";

                        }
                        if (DropDownList3.Text == "Average")
                        {
                            sql = "Insert Into question_table VAlUES('" + user + "','" + exname + idmaker() + ":" + countet + "','" + exname + "','" + "ToF" + "','" + txtQ.Text.Trim().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + tr.ToUpper().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + fa.ToUpper().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + weeknow + "','" + null + "','" + Label12.Text.Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + txtLO.Text.Trim().ToUpper() + "','" + txtCO.Text.Trim().ToUpper().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + "databank" + "','" + int.Parse(Labelda.Text) + "','" + DropDownList3.Text + "')";

                        }
                        if (DropDownList3.Text == "Hard")
                        {
                            sql = "Insert Into question_table VAlUES('" + user + "','" + exname + idmaker() + ":" + countet + "','" + exname + "','" + "ToF" + "','" + txtQ.Text.Trim().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + tr.ToUpper().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + fa.ToUpper().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + null + "','" + weeknow + "','" + null + "','" + Label12.Text.Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + txtLO.Text.Trim().ToUpper() + "','" + txtCO.Text.Trim().ToUpper().Replace("'", "").Replace("#", "").Replace("^", "").Replace("<", "").Replace(">", "").Replace("[", "").Replace("]", "").Replace(";", "") + "','" + "databank" + "','" + int.Parse(Labeldd.Text) + "','" + DropDownList3.Text + "')";


                        }
                        Scon = new SqlConnection(sConnection);
                        Scon.Open();
                        Cmd = new SqlCommand(sql, Scon);
                        Reader = Cmd.ExecuteReader();
                        Scon.Close();
                        Reader.Close();
                        MessageBox("The item has been added");
                        Label12.Text = "";
                        panTOF.Visible = true;
                        panMC.Visible = false;
                        panIden.Visible = false;
                        GridViewToF.DataBind();

                    }
                    //txtLO.Text = "LO";
                    //txtCO.Text = "CO";
                    txtidenAns.Text = "";
                    mcb.Text = "";
                    mcc.Text = "";
                    mccor.Text = "";
                    mcd.Text = "";
                    mce.Text = "";
                    imgQues.ImageUrl = "~/Images/NoImage_small.png";
                }
                DropDownList1.Items.Clear();
                helpfetch();
                txtLO.Text = "";
                txtCO.Text = "";
                txtidenAns.Text = "";
                txtQ.Text = "";
                mcb.Text = "";
                mcc.Text = "";
                mccor.Text = "";
                mcd.Text = "";
                mce.Text = "";
                imgQues.ImageUrl = "~/Images/NoImage_small.png";
                checkerPerc();
                txtQ.Focus();
            }
            else
            {
                string huli = "Question [" + questionsss + "...] already exists.";
                MessageBox(huli);
            }
        }
           
    }
    protected void aa(object sender, GridViewRowEventArgs e)
    {
        try
        {

            foreach (GridViewRow row in GridViewToF.Rows)
            {

                ImageButton ImgB = (ImageButton)row.FindControl("ImageButton2");
                if (ImgB.ImageUrl == "")
                {
                    ImgB.Visible = false;
                }
                else
                {
                    ImgB.Visible = true;
                }

            }
        }
        catch { }
    }
    protected void aaa(object sender, GridViewRowEventArgs e)
    {
        try
        {

            foreach (GridViewRow row in GridView1.Rows)
            {

                ImageButton ImgB = (ImageButton)row.FindControl("ImageButton2");
                if (ImgB.ImageUrl == "")
                {
                    ImgB.Visible = false;
                }
                else
                {
                    ImgB.Visible = true;
                }

            }
        }
        catch { }
    }
    private void refreshDropdown()
    {
        {
            SqlConnection Scon;
            SqlDataReader Reader;
            SqlCommand Cmd;
            StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");
            line = sr.ReadLine();
            string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;
            sql = "SELECT  question_table.l_o, question_table.c_o FROM course_topics INNER JOIN question_table ON course_topics.l_o = question_table.l_o WHERE course_topics.topic_desc ='" + DropDownList1.Text + "'ORDER BY question_table.l_o ASC";
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Reader = Cmd.ExecuteReader();
            //tanga

            while (Reader.Read())
            {
                txtLO.Text = (Reader["l_o"].ToString());
                txtCO.Text = (Reader["c_o"].ToString());
                Label14.Text = DropDownList1.Text;
            }

            Reader.Close();
            Scon.Close();
        }
        DropDownList1.Items.Clear();
        helpfetch();
        txtLO.Focus();

    }
    protected void DropDownList1_SelectedIndexChanged2(object sender, EventArgs e)
    {
        refreshDropdown();
       
    }
    protected void ImageButton3_Click(object sender, ImageClickEventArgs e)
    {

    }
    protected void TextBox1_TextChanged(object sender, EventArgs e)
    {
        
    }
    protected void Button6_Click2(object sender, EventArgs e)
    {
        refreshDropdown();
        try
        {
            {
                SqlConnection Scon;
                SqlCommand Cmd;
                StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt");
                line = sr.ReadLine();
                string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
                string sql;
                sql = "UPDATE question_table SET pt ='" + int.Parse(TextBox2.Text) + "' WHERE exam_code='" + exname + "' AND dif ='" + DropDownList2.SelectedValue.ToString() + "'";
                Scon = new SqlConnection(sConnection);
                Scon.Open();
                Cmd = new SqlCommand(sql, Scon);
                Cmd.ExecuteNonQuery();
                Scon.Close();
                string gok = DropDownList2.Text + " items has been changed to " + TextBox2.Text + " point(s)";
                MessageBox(gok);
                GridView1.DataBind();
                GridView3.DataBind();
                GridViewToF.DataBind();
                checkerPerc();

                if (DropDownList2.Text == "Easy")
                {
                    Labelde.Text = TextBox2.Text;
                }
                if (DropDownList2.Text == "Average")
                {
                    Labelda.Text = TextBox2.Text;
                }
                if (DropDownList2.Text == "Hard")
                {
                    Labeldd.Text = TextBox2.Text;
                }
            }
        }
        catch
        {
            MessageBox("The point you entered is invalid. Please enter digits");
        }
    }
    protected void DropDownList3_SelectedIndexChanged(object sender, EventArgs e)
    {
       
    }
    protected void LinkButton1_Click1(object sender, EventArgs e)
    {
        Page.Session["exname"] = Label23.Text;
        Page.Session["user"] = user;
        //     Page.Session["numCol"] = basu;
        Page.Session["editmode"] = editmode;

        Response.Redirect("InsPublish.aspx");
    }
    protected void RadioButton1_CheckedChanged2(object sender, EventArgs e)
    {
      
    }
    protected void Button10_Click(object sender, EventArgs e)
    {
        refreshDropdown();
        LinkButton3.Visible = false; LinkButton2.Visible = false;
        LinkButton4.Visible = false;
        LinkButton5.Text = "Are you sure you want to delete all items? Pls click this link to continue.";
        LinkButton5.Visible = true;
    }
    protected void Button11_Click(object sender, EventArgs e)
    {
        Response.Redirect("InsCreateExam_LOchoose.aspx");
    }
    protected void DropDownList4_SelectedIndexChanged(object sender, EventArgs e)
    {

    }
    protected void DropDownList4_SelectedIndexChanged1(object sender, EventArgs e)
    {
        try
        {

            foreach (GridViewRow row in GridViewToF.Rows)
            {

                Label ImgB = (Label)row.FindControl("Label3");
                Label ImgBc = (Label)row.FindControl("Label24");
                DropDownList ImgC = (DropDownList)row.FindControl("DropDownList4");
                if (ImgC.Text.Contains("True"))
                {
                    ImgBc.Text = "TRUE";
                    ImgB.Text = "FALSE";
                }
                if (ImgC.Text.Contains("False"))
                {
                    ImgBc.Text = "FALSE";
                    ImgB.Text = "TRUE";
                }

            }
        }
        catch { }
    }
    protected void LinkButton1_Click2(object sender, EventArgs e)
    {
        
    }
    protected void LinkButton2_Click(object sender, EventArgs e)
    {
        

        
    }
    protected void LinkButton1_Click3(object sender, EventArgs e)
    {
        LinkButton4.Visible = false;
        LinkButton3.Visible = false;
        LinkButton2.Focus();
        LinkButton2.Text = "Are you sure you want to delete this? Pls click this link to continue.";
        LinkButton2.Visible = true;
      
    }
    protected void LinkButton2_Click1(object sender, EventArgs e)
    {
        refreshDropdown();
        {

            SqlConnection Scon;

            SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
            string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
            string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;

            sql = "DELETE FROM question_table WHERE ques_id  = '" + GridView1.SelectedValue.ToString() + "'";
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Cmd.ExecuteNonQuery();
            Scon.Close();

            GridView1.DataBind();

            MessageBox("Item was successfully deleted");
            LinkButton2.Visible = false;
            checkerPerc();
        }
    }
    protected void LinkButton3_Click(object sender, EventArgs e)
    {
        {

            SqlConnection Scon;

            SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
            string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
            string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;

            sql = "DELETE FROM question_table WHERE ques_id  = '" + GridViewToF.SelectedValue.ToString() + "'";
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Cmd.ExecuteNonQuery();
            Scon.Close();
            checkerPerc();
            GridViewToF.DataBind();

            MessageBox("Item was successfully deleted");
            LinkButton3.Visible = false;
            checkerPerc();
        }
        checkerPerc();
    }
    protected void LinkButton1_Click4(object sender, EventArgs e)
    {
        LinkButton4.Visible = false;
        LinkButton2.Visible = false;
        LinkButton3.Focus();
        LinkButton3.Text = "Are you sure you want to delete this? Pls click this link to continue.";
        LinkButton3.Visible = true;
    }
    protected void LinkButton4_Click(object sender, EventArgs e)
    {
        {

            SqlConnection Scon;

            SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
            string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
            string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;

            sql = "DELETE FROM question_table WHERE ques_id  = '" + GridView3.SelectedValue.ToString()+ "'";
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Cmd.ExecuteNonQuery();
            Scon.Close();

            GridView3.DataBind();


            MessageBox("Item was successfully deleted");
            LinkButton4.Visible = false;
           
        }
        checkerPerc();
    }
    protected void LinkButton1_Click5(object sender, EventArgs e)
    {
        checkerPerc();

        LinkButton3.Visible = false;
        LinkButton2.Visible = false;
        LinkButton4.Focus();
        LinkButton4.Text = "Are you sure you want to delete this? Pls click this link to continue.";
        LinkButton4.Visible = true;
    }
    protected void LinkButton5_Click(object sender, EventArgs e)
    {
        refreshDropdown();
        {

            SqlConnection Scon;

            SqlCommand Cmd; StreamReader sr = new StreamReader(Request.PhysicalApplicationPath.ToString() + "//dBLoc.txt"); line = sr.ReadLine();
            string path = Server.HtmlEncode(Request.PhysicalApplicationPath).ToString() + @"CIT exams.mdf";
            string sConnection = "Data Source=" + line + "\\SQLEXPRESS;Database=CIT;User=sydrick;password=1234567";
            string sql;

            sql = "DELETE FROM question_table WHERE exam_code = '" + exname + "'";
            Scon = new SqlConnection(sConnection);
            Scon.Open();
            Cmd = new SqlCommand(sql, Scon);
            Cmd.ExecuteNonQuery();
            Scon.Close();
           
            GridView1.DataBind();
            GridView3.DataBind();
            GridViewToF.DataBind();
            MessageBox("Items were successfully deleted");
            LinkButton5.Visible = false;
        

        }
        checkerPerc();
       
    }
}
